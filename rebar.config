{erl_opts, [debug_info]}.
{deps, [
    {mapz, "~> 2.2"}
]}.

{extra_src_dirs, ["examples"]}.

{project_plugins, [erlfmt, rebar3_ex_doc]}.

{edoc_opts, [
    {preprocess, true},
    {doclet, edoc_doclet_chunks},
    {layout, edoc_layout},
    {dir, doc},
    {includes, ["src", "include"]}
]}.

{ex_doc, [
    {extras, [
          {"CHANGELOG.md", #{title => "Changelog"}},
          {"README.md", #{title => "Overview"}},
          {"LICENSE", #{title => "License"}}
    ]},
    {main, "README.md"},
    {homepage_url, "https://github.com/grisp/grisp"},
    {source_url, "https://github.com/grisp/grisp"},
    {assets, "assets"},
    {api_reference, true}
]}.

{hex, [{doc, #{provider => ex_doc}}]}.

{erlfmt, [
    write,
    {print_width, 80},
    {files, [
        "rebar.config",
        "{src,include,test}/*.{hrl,erl}"
    ]}
]}.

{alias, [
    {analyze, [xref, dialyzer]}
]}.

{profiles, [
    {emulation, [
        {deps, [
            {grisp_emulation, "0.1.2"}
        ]},
        {shell, [
            {apps, [grisp]},
            {config, "config/emulation.config"}
        ]}
    ]},
    {doc, [
        {erl_opts, [{d, 'DOC', 1}]}
    ]},
    {test, [
        {deps, [
            {grisp_emulation, "0.1.2"}
        ]},
        {shell, [
            {apps, [grisp]},
            {config, "config/test.config"}
        ]}
    ]},
    {eqc, [
        {extra_src_dirs, ["test"]}
    ]}
]}.
